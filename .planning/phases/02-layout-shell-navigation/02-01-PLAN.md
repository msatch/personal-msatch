---
phase: 02-layout-shell-navigation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - messages/es.json
  - messages/en.json
  - src/components/layout/header.tsx
  - src/components/layout/footer.tsx
  - src/app/[locale]/layout.tsx
  - src/app/[locale]/bio/page.tsx
  - src/app/[locale]/services/page.tsx
  - src/app/[locale]/contact/page.tsx
  - src/styles/globals.css
autonomous: true
requirements: [NAV-01, NAV-02, NAV-03, NAV-04, NAV-05, I18N-04]

must_haves:
  truths:
    - "A sticky header with logo, nav links (Home, Bio, Services, Contact), and language toggle is visible on every page"
    - "On mobile viewports, nav links collapse into a hamburger menu that opens and closes with smooth animation"
    - "Language toggle labeled ES/EN is always visible (not inside hamburger) and switches locale while preserving current path"
    - "Footer with contact info, privacy policy link, and social link placeholders appears on every page"
    - "Bio, Services, and Contact stub pages exist and render inside the shared layout"
  artifacts:
    - path: "src/components/layout/header.tsx"
      provides: "Sticky navigation with hamburger menu and language toggle"
      contains: "'use client'"
    - path: "src/components/layout/footer.tsx"
      provides: "Footer with contact, legal, social sections"
      contains: "useTranslations"
    - path: "src/app/[locale]/layout.tsx"
      provides: "Shared layout shell wrapping Header + main + Footer"
      contains: "Header"
    - path: "src/app/[locale]/bio/page.tsx"
      provides: "Bio stub page"
      contains: "generateStaticParams"
    - path: "src/app/[locale]/services/page.tsx"
      provides: "Services stub page"
      contains: "generateStaticParams"
    - path: "src/app/[locale]/contact/page.tsx"
      provides: "Contact stub page"
      contains: "generateStaticParams"
  key_links:
    - from: "src/app/[locale]/layout.tsx"
      to: "src/components/layout/header.tsx"
      via: "import and render"
      pattern: "import.*Header.*from.*components/layout/header"
    - from: "src/app/[locale]/layout.tsx"
      to: "src/components/layout/footer.tsx"
      via: "import and render"
      pattern: "import.*Footer.*from.*components/layout/footer"
    - from: "src/components/layout/header.tsx"
      to: "messages/*.json"
      via: "useTranslations('common.nav')"
      pattern: "useTranslations.*common\\.nav"
    - from: "src/components/layout/header.tsx"
      to: "@/i18n/navigation"
      via: "Link with locale prop for language toggle"
      pattern: "Link.*locale.*otherLocale"
---

<objective>
Build the shared layout shell: a sticky header with responsive navigation, language toggle, and footer -- wrapping all pages inside `[locale]/layout.tsx`. Create stub pages for Bio, Services, and Contact so all four site pages exist.

Purpose: Every page inherits a consistent navigation shell. This is the foundation that Phases 3-5 build content into.
Output: Header component, Footer component, updated locale layout, three stub pages, translation keys for nav/footer.
</objective>

<execution_context>
@C:/Users/matia/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/matia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-i18n-scaffolding/01-02-SUMMARY.md
@.planning/phases/02-layout-shell-navigation/02-RESEARCH.md
@src/app/[locale]/layout.tsx
@src/app/[locale]/page.tsx
@src/styles/globals.css
@src/i18n/navigation.ts
@messages/es.json
@messages/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add translation keys and create stub pages</name>
  <files>
    messages/es.json
    messages/en.json
    src/app/[locale]/bio/page.tsx
    src/app/[locale]/services/page.tsx
    src/app/[locale]/contact/page.tsx
  </files>
  <action>
**Translation keys:** Add `footer` and `notFound` namespaces to both `messages/es.json` and `messages/en.json`. Keep existing keys (metadata, common, home) intact. Add these new namespaces at root level:

For `es.json`, add:
```json
"footer": {
  "contact": {
    "title": "Contacto",
    "email": "hola@mgripe.com"
  },
  "legal": {
    "title": "Legal",
    "privacy": "Politica de privacidad"
  },
  "social": {
    "title": "Redes"
  },
  "copyright": "Todos los derechos reservados."
},
"notFound": {
  "title": "Pagina no encontrada",
  "message": "Lo sentimos, la pagina que buscas no existe.",
  "backHome": "Volver al inicio"
}
```

For `en.json`, add:
```json
"footer": {
  "contact": {
    "title": "Contact",
    "email": "hello@mgripe.com"
  },
  "legal": {
    "title": "Legal",
    "privacy": "Privacy policy"
  },
  "social": {
    "title": "Social"
  },
  "copyright": "All rights reserved."
},
"notFound": {
  "title": "Page not found",
  "message": "Sorry, the page you are looking for does not exist.",
  "backHome": "Back to home"
}
```

Also add a `"pages"` namespace for stub page headings (used by the stubs):

For `es.json`:
```json
"pages": {
  "bio": {
    "title": "Bio",
    "placeholder": "Contenido disponible pronto."
  },
  "services": {
    "title": "Servicios",
    "placeholder": "Contenido disponible pronto."
  },
  "contact": {
    "title": "Contacto",
    "placeholder": "Contenido disponible pronto."
  }
}
```

For `en.json`:
```json
"pages": {
  "bio": {
    "title": "Bio",
    "placeholder": "Content coming soon."
  },
  "services": {
    "title": "Services",
    "placeholder": "Content coming soon."
  },
  "contact": {
    "title": "Contact",
    "placeholder": "Content coming soon."
  }
}
```

**Stub pages:** Create three stub pages following the established pattern from Phase 1 (`generateStaticParams` + `setRequestLocale` + async params). Each stub page should:

1. Import `routing` from `@/i18n/routing`, `setRequestLocale` and `getTranslations` from `next-intl/server`
2. Export `generateStaticParams` returning `routing.locales.map((locale) => ({ locale }))`
3. Accept `params: Promise<{ locale: string }>`, await it, call `setRequestLocale(locale)`
4. Use `getTranslations('pages.bio')` (or services/contact) for the heading and placeholder text
5. Render a simple `<section>` with `<h1>` and placeholder `<p>`, using `py-16 px-4` padding and `mx-auto max-w-4xl` container

These are intentionally minimal -- Phases 3-5 will replace the content. The key is that they exist so the navigation links work and the catch-all 404 route (Plan 02) does not intercept them.
  </action>
  <verify>
Run `npm run build` and confirm all three new pages appear in the build output as static routes:
- `/es/bio`, `/en/bio`
- `/es/services`, `/en/services`
- `/es/contact`, `/en/contact`

No build errors related to missing translation keys.
  </verify>
  <done>
Both translation files contain footer, notFound, and pages namespaces. Three stub pages exist at `[locale]/bio/page.tsx`, `[locale]/services/page.tsx`, and `[locale]/contact/page.tsx`, each with `generateStaticParams` and `setRequestLocale`. Build succeeds with all routes listed as static.
  </done>
</task>

<task type="auto">
  <name>Task 2: Build Header and Footer components</name>
  <files>
    src/components/layout/header.tsx
    src/components/layout/footer.tsx
  </files>
  <action>
**Header (`src/components/layout/header.tsx`):**

Create a `'use client'` component. Follow the code example from 02-RESEARCH.md Pattern 2 closely, with these specifics:

1. **Imports:** `Link` and `usePathname` from `@/i18n/navigation`, `useLocale` and `useTranslations` from `next-intl`, `useState` and `useEffect` from `react`, `cn` from `@/lib/utils`

2. **Nav links array:** Define `navLinks` as `const` array with `{ href: '/', labelKey: 'home' }, { href: '/bio', labelKey: 'bio' }, { href: '/services', labelKey: 'services' }, { href: '/contact', labelKey: 'contact' }`

3. **State:** `const [mobileMenuOpen, setMobileMenuOpen] = useState(false)`

4. **Escape key handler:** Add `useEffect` that listens for Escape key and closes the menu. Clean up on unmount. (See 02-RESEARCH.md "Escape Key to Close Mobile Menu")

5. **Header element:** `<header className="sticky top-0 z-50 border-b border-border bg-background/95 backdrop-blur-sm">`

6. **Inner nav:** `<nav className="mx-auto flex max-w-6xl items-center justify-between px-4 py-3" aria-label="Main navigation">`

7. **Logo/home link:** `<Link href="/" className="text-lg font-bold">M. Gripe</Link>`

8. **Desktop nav links:** `<div className="hidden md:flex items-center gap-6">` containing mapped `navLinks` with active link styling using `cn()` and `pathname === href` comparison. Active state: `text-accent`, inactive: `text-foreground`. Add `hover:text-accent transition-colors`.

9. **Right side container:** `<div className="flex items-center gap-3">` containing:
   - **Language toggle (OUTSIDE hamburger, always visible):** `<Link href={pathname} locale={otherLocale} className="text-sm font-medium px-3 py-1.5 rounded-md border border-border hover:bg-accent-light transition-colors">{otherLocale.toUpperCase()}</Link>` where `otherLocale = locale === 'es' ? 'en' : 'es'`
   - **Hamburger button (mobile only):** `<button className="md:hidden flex flex-col justify-center gap-1.5 p-2">` with `aria-expanded={mobileMenuOpen}`, `aria-controls="mobile-menu"`, `aria-label` toggling between "Close menu" / "Open menu". Three `<span>` elements with `h-0.5 w-6 bg-foreground` base classes. When open: first span `translate-y-2 rotate-45`, middle span `opacity-0`, third span `-translate-y-2 -rotate-45`. All with `transition-transform duration-300` (or `transition-opacity` for middle).

10. **Mobile menu panel:** `<div id="mobile-menu" className={cn('md:hidden overflow-hidden transition-all duration-300 ease-in-out', mobileMenuOpen ? 'max-h-64 opacity-100' : 'max-h-0 opacity-0')}>` containing nav links in a `flex flex-col gap-3` with `py-4 px-4 border-t border-border`. Each link has `onClick={() => setMobileMenuOpen(false)}` to close on navigation. Use `text-base font-medium py-2` for generous touch targets.

**Footer (`src/components/layout/footer.tsx`):**

Create a client component (needs `useTranslations`). Follow 02-RESEARCH.md Pattern 6:

1. **Imports:** `useTranslations` from `next-intl`, `Link` from `@/i18n/navigation`

2. **Structure:** `<footer className="border-t border-border bg-background">` with inner `<div className="mx-auto max-w-6xl px-4 py-8 md:py-12">`

3. **Three-column layout:** `<div className="flex flex-col md:flex-row justify-between gap-8">`
   - **Contact column:** Title from `t('contact.title')`, email from `t('contact.email')`
   - **Legal column:** Title from `t('legal.title')`, privacy link from `t('legal.privacy')` using `<Link href="/privacy">` (placeholder route)
   - **Social column:** Title from `t('social.title')`, LinkedIn and GitHub links with `href="#"` (placeholder URLs)

4. **Copyright bar:** `<div className="mt-8 pt-8 border-t border-border text-center text-sm text-muted">` with `(c) {new Date().getFullYear()} M. Gripe. {t('copyright')}`

5. All text uses `text-sm text-muted` for secondary info, headings use `font-bold text-sm uppercase tracking-wider mb-3`

Both components export named exports: `export function Header()` and `export function Footer()`.
  </action>
  <verify>
Run `npx tsc --noEmit` -- no TypeScript errors. Verify both files exist and export the correct components. Verify Header is marked `'use client'` at the top.
  </verify>
  <done>
`src/components/layout/header.tsx` exists as a `'use client'` component with sticky nav, hamburger menu (3-span animated icon), desktop nav links with active styling, language toggle always visible outside hamburger, Escape key handler, and mobile slide-down menu that closes on link click. `src/components/layout/footer.tsx` exists with three-column layout (contact, legal, social) and copyright bar. Both use `useTranslations` with the correct namespaces.
  </done>
</task>

<task type="auto">
  <name>Task 3: Integrate layout shell and update globals.css</name>
  <files>
    src/app/[locale]/layout.tsx
    src/styles/globals.css
  </files>
  <action>
**Layout integration (`src/app/[locale]/layout.tsx`):**

Modify the existing layout to wrap `{children}` with Header and Footer. Keep all existing code (fonts, metadata, locale validation, NextIntlClientProvider) intact. Changes:

1. Add imports: `import { Header } from '@/components/layout/header';` and `import { Footer } from '@/components/layout/footer';`

2. Inside the `<NextIntlClientProvider>` wrapper, replace the bare `{children}` with:
```tsx
<Header />
<main className="flex-1">
  {children}
</main>
<Footer />
```

3. Add `min-h-screen flex flex-col` to the `<body>` className (keeps existing font variable classes). This ensures the footer sticks to the bottom even on short pages: body is full-height flex column, `<main>` has `flex-1` to fill remaining space.

The final body tag should be: `<body className={\`${geistSans.variable} ${geistMono.variable} min-h-screen flex flex-col\`}>`

Do NOT change any other part of the layout (font loading, generateStaticParams, generateMetadata, locale validation, setRequestLocale).

**Globals.css update (`src/styles/globals.css`):**

Add `scroll-pt-16` to the `html` element inside the existing `@layer base` block. This adds `scroll-padding-top: 4rem` to account for the sticky header when using anchor links. Add it as a new rule inside `@layer base`:

```css
html {
  @apply scroll-pt-16;
}
```

Place this rule BEFORE the existing `body` rule in the `@layer base` block.
  </action>
  <verify>
1. Run `npm run build` -- full build passes with no errors
2. Run `npm run dev` and verify in a browser:
   - Navigate to `http://localhost:3000/es/` -- header with "M. Gripe" logo, nav links, "EN" toggle, and footer are visible
   - Navigate to `http://localhost:3000/en/` -- nav shows English labels, "ES" toggle visible
   - Navigate to `/es/bio`, `/es/services`, `/es/contact` -- all show header, stub content, footer
   - Resize to mobile width -- hamburger appears, nav links hidden; tap hamburger -- links slide down; tap link -- menu closes and navigates
   - Click language toggle -- switches between /es/ and /en/ while staying on same page
   - Scroll down on any page -- header stays stuck at top
   - Footer is at the bottom even on short stub pages
  </verify>
  <done>
The `[locale]/layout.tsx` renders `<Header />`, `<main>{children}</main>`, `<Footer />` inside NextIntlClientProvider. Body has `min-h-screen flex flex-col` for footer-at-bottom layout. `globals.css` has `scroll-pt-16` on html. All pages (home, bio, services, contact) render inside the shared shell with sticky header, responsive hamburger, language toggle, and footer.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes with zero errors and shows static routes for all 4 pages in both locales
2. Header is sticky (`position: sticky`) -- scrolling keeps it at top
3. Desktop (>768px): All 4 nav links visible, language toggle visible, no hamburger
4. Mobile (<768px): Nav links hidden, hamburger button visible, language toggle visible, tapping hamburger reveals links with smooth transition
5. Language toggle shows "EN" when on Spanish locale, "ES" when on English locale; clicking navigates to same page in other locale
6. Footer appears on all 4 pages with contact info, privacy link, social placeholders, and copyright
7. Active nav link is highlighted with accent color
8. Escape key closes the mobile menu
9. Hamburger icon animates to X when menu is open
</verification>

<success_criteria>
- All 4 pages (Home, Bio, Services, Contact) render inside the shared layout shell
- Sticky header with responsive navigation works on desktop and mobile
- Language toggle switches locale on all viewports without being hidden in hamburger
- Footer with contact/legal/social sections is visible on every page
- `npm run build` passes with all routes static
</success_criteria>

<output>
After completion, create `.planning/phases/02-layout-shell-navigation/02-01-SUMMARY.md`
</output>
