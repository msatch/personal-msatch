---
phase: 09-case-study-narratives
plan: 02
type: execute
wave: 2
depends_on:
  - 09-01
files_modified:
  - src/components/home/case-studies-section.tsx
  - src/app/[locale]/page.tsx
autonomous: true
requirements:
  - PROOF-01
  - PROOF-02
  - PROOF-03

must_haves:
  truths:
    - "Home page displays 3 case study narratives between the process section and the CTA band"
    - "Each case study shows industry context, problem, intervention, and result in a clear visual structure"
    - "Case studies render correctly in both Spanish and English"
    - "Case studies render as Server Components with zero client-side JavaScript overhead"
    - "Case studies are wrapped in ScrollReveal for consistent page animation"
  artifacts:
    - path: "src/components/home/case-studies-section.tsx"
      provides: "CaseStudiesSection async Server Component"
      exports: ["CaseStudiesSection"]
      min_lines: 25
    - path: "src/app/[locale]/page.tsx"
      provides: "Home page composition with case studies inserted"
      contains: "CaseStudiesSection"
  key_links:
    - from: "src/components/home/case-studies-section.tsx"
      to: "messages/es.json"
      via: "getTranslations('home.caseStudies')"
      pattern: "getTranslations.*home\\.caseStudies"
    - from: "src/app/[locale]/page.tsx"
      to: "src/components/home/case-studies-section.tsx"
      via: "Import and JSX insertion between ProcessSection and CtaBand"
      pattern: "import.*CaseStudiesSection"
---

<objective>
Create the CaseStudiesSection Server Component and integrate it into the home page between ProcessSection and CtaBand.

Purpose: Wire the bilingual case study content (from Plan 09-01) into a visible, well-structured section on the home page. The component follows the exact same async Server Component pattern used by every other home page section.

Output: New case-studies-section.tsx component, updated page.tsx with the section inserted.
</objective>

<execution_context>
@C:/Users/matia/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/matia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-case-study-narratives/09-RESEARCH.md
@.planning/phases/09-case-study-narratives/09-01-SUMMARY.md

@src/components/home/process-section.tsx
@src/components/home/problem-section.tsx
@src/app/[locale]/page.tsx
</context>

<interfaces>
<!-- Key patterns the executor needs. Extracted from codebase. -->

From src/components/home/process-section.tsx (established pattern):
```typescript
import { getTranslations } from 'next-intl/server';

export async function ProcessSection() {
  const t = await getTranslations('home.process');
  // Uses t('title'), t('subtitle'), t(`steps.${id}.title`), t(`steps.${id}.description`)
  // Iterates with ['1', '2', '3'].map((id) => ...)
}
```

From src/app/[locale]/page.tsx (composition pattern):
```typescript
import { ScrollReveal } from '@/components/ui/scroll-reveal';
// Sections wrapped in <ScrollReveal> or <ScrollReveal delay={100}>
// Order: HeroSection -> ProblemSection -> ServicesPreview -> ProcessSection -> CtaBand
```

Translation key structure (from 09-01):
```
home.caseStudies.title
home.caseStudies.subtitle
home.caseStudies.labels.problem
home.caseStudies.labels.intervention
home.caseStudies.labels.result
home.caseStudies.items.{1|2|3}.industry
home.caseStudies.items.{1|2|3}.problem
home.caseStudies.items.{1|2|3}.intervention
home.caseStudies.items.{1|2|3}.result
```
</interfaces>

<tasks>

<task type="auto">
  <name>Task 1: Create CaseStudiesSection Server Component</name>
  <files>src/components/home/case-studies-section.tsx</files>
  <action>
Create an async Server Component that renders the 3 case study narratives. Follow the exact pattern established by process-section.tsx and problem-section.tsx.

**Component specification:**

```typescript
// src/components/home/case-studies-section.tsx
import { getTranslations } from 'next-intl/server';

export async function CaseStudiesSection() {
  const t = await getTranslations('home.caseStudies');
  // Render section with title, subtitle, and 3 case study cards
}
```

**Layout and styling:**
- Section wrapper: `bg-muted/30 px-4 py-16 md:py-20 lg:py-24` (tinted background matching ServicesPreview for visual rhythm)
- Container: `mx-auto max-w-6xl` (wider than ProcessSection's max-w-4xl to accommodate 3-column layout)
- Title: `text-2xl md:text-3xl lg:text-4xl font-bold text-center` (matches all other section titles)
- Subtitle: `mt-4 text-base md:text-lg text-muted text-center max-w-3xl mx-auto` (matches all other section subtitles)
- Card container: `mt-12 space-y-8 md:space-y-10` (vertical stack of case study cards)
- Each card: `<article>` element (semantic HTML for self-contained content) with `p-6 md:p-8 rounded-lg border border-border bg-background`
- Industry tag: `text-sm font-semibold text-accent uppercase tracking-wide` (draws eye to context first)
- Problem/intervention/result layout: `mt-4 grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6` (3-column on desktop, stacked on mobile)
- Section labels (from `labels.problem`, `labels.intervention`, `labels.result`): `font-bold text-base`
- Content text: `mt-1 text-sm text-muted`
- Result content gets additional `font-medium` for subtle emphasis on outcomes

**Key implementation details:**
- Do NOT add `'use client'` -- this is a Server Component
- Use `getTranslations` from `next-intl/server` (NOT `useTranslations`)
- Iterate with `['1', '2', '3'].map((id) => ...)`
- Access labels via `t('labels.problem')`, `t('labels.intervention')`, `t('labels.result')`
- Access items via `t(\`items.${id}.industry\`)`, etc.
- Export as named export: `export async function CaseStudiesSection()`
  </action>
  <verify>
    <automated>node -e "const fs=require('fs'); const content=fs.readFileSync('src/components/home/case-studies-section.tsx','utf8'); const checks=[!content.includes('use client'), content.includes('getTranslations'), content.includes('home.caseStudies'), content.includes('export async function CaseStudiesSection'), content.includes('article'), content.includes('labels.problem'), content.includes('labels.intervention'), content.includes('labels.result')]; console.log(checks.every(Boolean) ? 'PASS: Component structure correct' : 'FAIL: Missing elements - ' + checks.map((c,i)=>c?'ok':['no use client','getTranslations','namespace','export','article','label-p','label-i','label-r'][i]).filter(x=>x!=='ok').join(', '))"</automated>
  </verify>
  <done>
CaseStudiesSection is an async Server Component that renders 3 case study cards with industry context, problem/intervention/result structure, and responsive 3-column layout on desktop. Uses getTranslations from next-intl/server. Zero client-side JavaScript.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate CaseStudiesSection into home page</name>
  <files>src/app/[locale]/page.tsx</files>
  <action>
Add the CaseStudiesSection import and insert it into the home page JSX between ProcessSection and CtaBand, wrapped in ScrollReveal.

**Changes to make:**

1. Add import at the top (after existing home component imports):
```typescript
import { CaseStudiesSection } from '@/components/home/case-studies-section';
```

2. In the JSX return, insert between the ProcessSection ScrollReveal and the CtaBand ScrollReveal:
```tsx
<ScrollReveal>
  <CaseStudiesSection />
</ScrollReveal>
```

The final section order should be:
1. HeroSection
2. ScrollReveal > ProblemSection
3. ScrollReveal delay={100} > ServicesPreview
4. ScrollReveal delay={100} > ProcessSection
5. **ScrollReveal > CaseStudiesSection** (NEW)
6. ScrollReveal > CtaBand

Do NOT use `delay` on the CaseStudiesSection ScrollReveal -- it's a new section entering the viewport independently, not a sequence with the previous section.
  </action>
  <verify>
    <automated>node -e "const fs=require('fs'); const content=fs.readFileSync('src/app/[locale]/page.tsx','utf8'); const lines=content.split('\n'); const csIdx=lines.findIndex(l=>l.includes('CaseStudiesSection')); const procIdx=lines.findIndex(l=>l.includes('ProcessSection')); const ctaIdx=lines.findIndex(l=>l.includes('CtaBand')); const importOk=content.includes(\"import { CaseStudiesSection }\"); const orderOk=procIdx<csIdx && csIdx<ctaIdx; const scrollOk=content.includes('ScrollReveal') && csIdx>0; console.log(importOk && orderOk && scrollOk ? 'PASS: Home page integration correct' : 'FAIL: Import=' + importOk + ' Order=' + orderOk + ' ScrollReveal=' + scrollOk)"</automated>
  </verify>
  <done>
Home page imports CaseStudiesSection and renders it between ProcessSection and CtaBand, wrapped in ScrollReveal. The page follows the narrative arc: problem -> services -> process -> proof -> CTA.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Home page at /es/ shows 3 case study narratives in Spanish between the process section and CTA band
3. Home page at /en/ shows 3 case study narratives in English
4. Each case study displays industry context, problem, intervention, and result
5. On desktop (>768px), problem/intervention/result display in a 3-column grid
6. On mobile (375px), problem/intervention/result stack vertically
7. Case studies section has `bg-muted/30` background distinguishing it from surrounding sections
8. No `'use client'` directive in case-studies-section.tsx (Server Component)
9. ScrollReveal animation triggers when scrolling to the section
</verification>

<success_criteria>
- CaseStudiesSection renders as a Server Component with zero client-side JavaScript
- Section appears between ProcessSection and CtaBand on the home page
- All 3 case studies display with clear problem/intervention/result structure
- Content renders correctly in both Spanish and English
- Responsive layout works at 375px and desktop widths
- Build succeeds with no errors
</success_criteria>

<output>
After completion, create `.planning/phases/09-case-study-narratives/09-02-SUMMARY.md`
</output>
