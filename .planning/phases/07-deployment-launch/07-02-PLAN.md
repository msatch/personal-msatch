---
phase: 07-deployment-launch
plan: 02
type: execute
wave: 2
depends_on:
  - "07-01"
files_modified: []
autonomous: false
requirements:
  - DEPLOY-02
  - DEPLOY-03

must_haves:
  truths:
    - "All pages render correctly in production in both /es/ and /en/ routes"
    - "Contact form submits successfully in production and delivers email via Resend"
    - "Locale switching works and preference persists across navigation"
    - "GTM loads in production when NEXT_PUBLIC_GTM_ID is set"
    - "WhatsApp CTA opens correct number on mobile"
    - "404 page renders for invalid routes in both locales"
  artifacts: []
  key_links:
    - from: "Contact form UI"
      to: "Resend Server Action"
      via: "Server Action invocation in production"
      pattern: "fetch.*contact"
    - from: "AnalyticsProvider"
      to: "GTM container"
      via: "NEXT_PUBLIC_GTM_ID env var at build time"
      pattern: "gtm\\.js"
    - from: "proxy.ts"
      to: "Locale routing"
      via: "Node.js runtime on Vercel"
      pattern: "NEXT_LOCALE"
---

<objective>
Verify the production deployment works end-to-end: all routes, contact form, locale switching, analytics, and conversion elements.

Purpose: Confirm DEPLOY-02 (all pages render correctly in production) and DEPLOY-03 (contact form submits successfully and delivers email). This is the final quality gate before v1.1 ships.

Output: Verified production site with all features working.
</objective>

<execution_context>
@C:/Users/matia/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/matia/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-deployment-launch/07-RESEARCH.md
@.planning/phases/07-deployment-launch/07-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Automated production smoke test</name>
  <files></files>
  <action>
Using the production URL from Plan 07-01 (shared by user in checkpoint resume), run automated HTTP checks against all routes.

Run curl (or equivalent) against each of these 14 URLs and verify HTTP 200 status:

```
{PROD_URL}/           -> expect 3xx redirect to /es/
{PROD_URL}/es         -> expect 200
{PROD_URL}/en         -> expect 200
{PROD_URL}/es/bio     -> expect 200
{PROD_URL}/en/bio     -> expect 200
{PROD_URL}/es/services -> expect 200
{PROD_URL}/en/services -> expect 200
{PROD_URL}/es/contact  -> expect 200
{PROD_URL}/en/contact  -> expect 200
{PROD_URL}/es/privacy  -> expect 200
{PROD_URL}/en/privacy  -> expect 200
{PROD_URL}/es/nonexistent -> expect 200 (404 page rendered as 200 or 404)
{PROD_URL}/en/nonexistent -> expect 200 (404 page rendered as 200 or 404)
```

For each response, check:
1. HTTP status code is 200 (or 3xx for root redirect)
2. Response body contains expected locale text (e.g., "M. Gripe" appears in all pages)
3. No 500 errors

Also check:
- `{PROD_URL}/es` response contains GTM script tag (if NEXT_PUBLIC_GTM_ID was set)
- Response headers include proper cache-control for static pages

Print a summary table of all route checks: URL | Status | Pass/Fail
  </action>
  <verify>
    <automated>curl -s -o /dev/null -w "%{http_code}" {PROD_URL}/es</automated>
  </verify>
  <done>
- All 12 locale routes return HTTP 200
- Root URL (/) redirects to /es/
- No 500 errors on any route
- GTM script present in HTML if NEXT_PUBLIC_GTM_ID was configured
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Production functional verification</name>
  <files></files>
  <action>
Human verifies interactive features in a real browser. The automated smoke test (Task 1) confirmed all routes return HTTP 200 -- this checkpoint verifies visual rendering, interactive features, and end-to-end email delivery.

The user should test:
- Route rendering in both locales (home, bio, services, contact, privacy, 404)
- Locale switching persistence
- Contact form end-to-end (submit form, check email inbox)
- WhatsApp CTA on mobile viewport
- Cookie consent banner behavior
- GTM loading (if configured)
- Visual layout at 375px mobile width in Spanish
  </action>
  <what-built>The site is deployed to Vercel and all routes return HTTP 200. Automated smoke tests confirm pages are serving content. Now the user needs to verify the interactive features work correctly in a real browser.</what-built>
  <how-to-verify>
**Route rendering (both locales):**
1. Visit {PROD_URL}/es -- home page loads with Spanish content, hero section, case studies, CTA band
2. Visit {PROD_URL}/en -- home page loads with English content
3. Navigate to Bio, Services, Contact, Privacy via the top nav in both locales
4. Visit {PROD_URL}/es/nonexistent -- 404 page in Spanish
5. Visit {PROD_URL}/en/nonexistent -- 404 page in English

**Locale switching:**
6. On any page, click the language toggle (ES/EN) -- URL and content change
7. Navigate to another page -- locale preference persists (does not revert)

**Contact form (DEPLOY-03):**
8. Go to {PROD_URL}/es/contact (or /en/contact)
9. Fill in name, email, message (required fields)
10. Submit the form
11. Verify: success message appears on screen
12. Check your email inbox (RESEND_TO_EMAIL) -- form submission email should arrive

**Conversion elements:**
13. On mobile (or Chrome DevTools responsive mode at 375px): WhatsApp button visible and clickable
14. Cookie consent banner appears on first visit -- accept, then verify it does not reappear on refresh
15. If GTM is configured: open Chrome DevTools > Network tab, filter for "gtm.js" -- should see a request after consent

**Visual check:**
16. On mobile (375px) in Spanish: no layout breaks, text does not overflow, buttons are tappable
17. Scroll reveals animate on scroll down
18. Dark/light mode toggle works and persists
  </how-to-verify>
  <verify>User confirms all checks pass or reports issues</verify>
  <done>
- All pages render correctly in both locales in production (DEPLOY-02)
- Contact form submits and email is delivered (DEPLOY-03)
- All interactive features (locale switching, consent banner, WhatsApp CTA) work in production
  </done>
  <resume-signal>Type "verified" if all checks pass, or describe any issues found (e.g., "contact form returns 500", "locale resets on navigation")</resume-signal>
</task>

</tasks>

<verification>
All 14 routes return HTTP 200 in production. Contact form delivers email. Locale switching persists. GTM loads (if configured). WhatsApp CTA works. No layout breaks at 375px mobile width in Spanish.
</verification>

<success_criteria>
DEPLOY-02: All pages render correctly in production in both /es/ and /en/ routes, including case studies, updated messaging, privacy policy, and competitive positioning content.
DEPLOY-03: Contact form submits successfully in production and email arrives at the configured RESEND_TO_EMAIL address.
</success_criteria>

<output>
After completion, create `.planning/phases/07-deployment-launch/07-02-SUMMARY.md`
</output>
